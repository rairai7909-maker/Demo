<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ</title>
    <style>
        :root {
            --primary-green: #2e7d32;
            --light-green: #e8f5e9;
            --accent-orange: #ff6f00;
            --text-dark: #212121;
            --text-light: #757575;
            --white: #ffffff;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: var(--text-dark);
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header Styling Updated for Logo */
        header {
            background-color: var(--primary-green);
            color: var(--white);
            padding: 10px 15px;
            text-align: center;
            box-shadow: var(--shadow);
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px; /* Space between logo and text */
        }

        .app-logo {
            height: 40px; /* Adjust size as needed */
            width: auto;
            border-radius: 5px;
            background: white; /* Fallback if transparent */
        }

        header h1 {
            font-size: 1.4rem;
            font-weight: 700;
            margin: 0;
        }

        /* Main Container */
        main {
            flex: 1;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            background: #fff;
        }

        /* Sections */
        .screen {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-y: auto;
        }

        .screen.active {
            display: flex;
        }

        /* --- LANDING PAGE STYLES --- */
        .hero-section {
            text-align: center;
            padding: 20px 0;
            width: 100%;
        }

        .hero-title {
            color: var(--primary-green);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .hero-desc {
            color: var(--text-light);
            margin-bottom: 25px;
            font-size: 0.95rem;
        }

        .faq-container {
            width: 100%;
            margin-top: 20px;
            text-align: left;
        }

        details {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 10px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        summary {
            background: var(--light-green);
            padding: 15px;
            font-weight: 600;
            cursor: pointer;
            color: var(--primary-green);
            list-style: none;
            position: relative;
        }

        summary::after {
            content: '+';
            position: absolute;
            right: 15px;
            font-weight: bold;
            font-size: 1.2rem;
        }

        details[open] summary::after {
            content: '-';
        }

        .faq-answer {
            padding: 15px;
            color: var(--text-dark);
            line-height: 1.5;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
        }

        /* CEO / Expert Section Styling */
        .ceo-section {
            margin-top: 30px;
            text-align: center;
            padding: 30px 15px;
            background: linear-gradient(to bottom, #f1f8e9, #fff);
            border: 1px solid #c5e1a5;
            border-radius: 16px;
            width: 100%;
            margin-bottom: 50px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .ceo-img {
            width: 100%;
            max-width: 400px;
            height: auto;
            border-radius: 20px;
            object-fit: cover;
            margin-bottom: 20px;
            background-color: #ddd;
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }

        .ceo-name {
            font-weight: 700;
            font-size: 1.4rem;
            color: var(--primary-green);
            margin-bottom: 5px;
        }

        .ceo-badge {
            background-color: var(--accent-orange);
            color: white;
            padding: 5px 15px;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .ceo-bio {
            color: var(--text-dark);
            font-size: 1rem;
            font-style: italic;
            line-height: 1.5;
            opacity: 0.9;
            padding: 0 10px;
        }

        /* Camera View */
        #camera-container {
            width: 100%;
            height: 60vh;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        video, #captured-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        #captured-image {
            display: none;
        }

        /* Controls */
        .controls {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding-bottom: 20px;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        button {
            border: none;
            border-radius: 50px;
            padding: 15px 30px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.1s;
            box-shadow: var(--shadow);
            width: 100%;
        }

        button:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background-color: var(--primary-green);
            color: white;
            padding: 18px 30px;
            font-size: 1.1rem;
        }

        .btn-secondary {
            background-color: var(--white);
            color: var(--primary-green);
            border: 2px solid var(--primary-green);
        }

        .btn-action {
            background-color: var(--accent-orange);
            color: white;
            font-size: 1.1rem;
        }

        /* Loading Spinner */
        #loading-screen {
            justify-content: center;
            text-align: center;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--light-green);
            border-top: 5px solid var(--primary-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .ai-notice {
            font-size: 0.8rem;
            color: #888;
            margin-top: 10px;
            background: rgba(0,0,0,0.05);
            padding: 5px 10px;
            border-radius: 4px;
        }

        /* Results Section */
        .result-card {
            background: white;
            width: 100%;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .result-title {
            font-size: 1.2rem;
            color: var(--primary-green);
            margin-bottom: 10px;
            border-bottom: 2px solid var(--light-green);
            padding-bottom: 5px;
        }

        .diagnosis-content ul {
            padding-left: 20px;
            line-height: 1.6;
        }

        .diagnosis-content li {
            margin-bottom: 8px;
        }

        /* Marketing Section */
        .marketing-box {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border: 2px solid var(--accent-orange);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            width: 100%;
            margin-top: 20px;
            box-shadow: var(--shadow);
        }

        .marketing-text {
            font-size: 1rem;
            color: #d84315;
            margin-bottom: 15px;
            font-weight: 500;
            line-height: 1.5;
        }

        .shop-btn {
            background-color: #d84315;
            color: white;
            text-decoration: none;
            display: inline-block;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            animation: pulse 2s infinite;
        }

        /* Error/Info Messages */
        .message-box {
            padding: 20px;
            background-color: #ffebee;
            color: #c62828;
            border-radius: 8px;
            text-align: center;
            margin-top: 20px;
            display: none;
        }

        /* Hidden File Input */
        #file-input {
            display: none;
        }

        /* --- POPUP MODAL CSS --- */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 100;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .modal-box {
            background: white;
            padding: 25px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: popIn 0.3s ease;
        }

        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal-title {
            color: var(--primary-green);
            font-size: 1.4rem;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .input-group {
            margin-bottom: 15px;
            text-align: left;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .input-field:focus {
            border-color: var(--primary-green);
            outline: none;
        }

        .btn-go {
            background: var(--accent-orange);
            color: white;
            width: 100%;
            font-size: 1.2rem;
            margin-top: 10px;
        }
        
        .close-modal {
            margin-top: 15px;
            color: #777;
            text-decoration: underline;
            cursor: pointer;
            font-size: 0.9rem;
        }

    </style>
</head>
<body>

    <header>
        <img src="https://i.ibb.co/N6TCx6NB/IMG-20260116-120014.jpg" alt="Logo" class="app-logo">
        <h1>‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ</h1>
    </header>

    <main>
        <div id="landing-screen" class="screen active">
            <div class="hero-section">
                <h2 class="hero-title">‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§ï‡§ø‡§∏‡§æ‡§® ‡§≠‡§æ‡§à! üôè</h2>
                <p class="hero-desc">‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™‡§ï‡•Ä ‡§´‡§∏‡§≤ ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§¨‡•Ä‡§Æ‡§æ‡§∞‡•Ä ‡§≤‡§ó ‡§ó‡§Ø‡•Ä ‡§π‡•à? ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§® ‡§ï‡§∞‡•á‡§Ç, AI ‡§î‡§∞ ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û ‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§∏‡•á ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡•á‡§Ç‡•§</p>
                <button class="btn-primary" onclick="startApp()">üì∏ ‡§´‡•ã‡§ü‡•ã ‡§ñ‡•Ä‡§Ç‡§ö‡§ï‡§∞ ‡§¨‡•Ä‡§Æ‡§æ‡§∞‡•Ä ‡§¶‡•á‡§ñ‡•á‡§Ç</button>
            </div>

            <div class="faq-container">
                <details>
                    <summary>‡§Ø‡§π ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§¨‡§®‡§æ‡§à ‡§ó‡§à ‡§π‡•à?</summary>
                    <div class="faq-answer">‡§π‡§Æ‡§æ‡§∞‡§æ ‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø ‡§ï‡§ø‡§∏‡§æ‡§® ‡§≠‡§æ‡§á‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§®‡§æ ‡§π‡•à‡•§ ‡§Ø‡§π ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü AI ‡§§‡§ï‡§®‡•Ä‡§ï ‡§î‡§∞ ‡§π‡§Æ‡§æ‡§∞‡•á ‡§ï‡•É‡§∑‡§ø ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§Ü‡§™‡§ï‡•Ä ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§¨‡•Ä‡§Æ‡§æ‡§∞‡•Ä ‡§ï‡•ã ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§™‡§π‡§ö‡§æ‡§®‡§§‡•Ä ‡§π‡•à‡•§</div>
                </details>
                <details>
                    <summary>‡§Ö‡§ó‡§∞ ‡§¨‡•Ä‡§Æ‡§æ‡§∞‡•Ä ‡§Æ‡§ø‡§≤‡•á ‡§§‡•ã ‡§¶‡§µ‡§æ‡§à ‡§ï‡§π‡§æ‡§Å ‡§∏‡•á ‡§≤‡•á‡§Ç?</summary>
                    <div class="faq-answer">‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§¨‡§π‡•Å‡§§ ‡§∏‡•Ä ‡§®‡§ï‡§≤‡•Ä ‡§¶‡§µ‡§æ‡§á‡§Ø‡§æ‡§Ç ‡§¨‡§ø‡§ï ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§Ö‡§ó‡§∞ ‡§Ü‡§™ ‡§Ö‡§™‡§®‡•Ä ‡§´‡§∏‡§≤ ‡§ï‡•ã ‡§¨‡§ö‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã <strong>‡§∏‡§ø‡§∞‡•ç‡§´ ‡§î‡§∞ ‡§∏‡§ø‡§∞‡•ç‡§´ ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§¶‡•Å‡§ï‡§æ‡§® (‡§∂‡•â‡§™)</strong> ‡§∏‡•á ‡§π‡•Ä ‡§¶‡§µ‡§æ‡§à ‡§ñ‡§∞‡•Ä‡§¶‡•á‡§Ç‡•§</div>
                </details>
                <details>
                    <summary>‡§Ø‡§π‡§æ‡§Å ‡§∏‡•á ‡§¶‡§µ‡§æ‡§à ‡§≤‡•á‡§®‡•á ‡§ï‡•á ‡§ï‡•ç‡§Ø‡§æ ‡§´‡§æ‡§Ø‡§¶‡•á ‡§π‡•à‡§Ç?</summary>
                    <div class="faq-answer">
                        <ul>
                            <li>‚úÖ 100% ‡§ì‡§∞‡§ø‡§ú‡§ø‡§®‡§≤ (‡§Ö‡§∏‡§≤‡•Ä) ‡§ï‡§Ç‡§™‡§®‡•Ä ‡§ï‡§æ ‡§Æ‡§æ‡§≤‡•§</li>
                            <li>‚úÖ ‡§´‡§∏‡§≤ ‡§ï‡•á ‡§∞‡•ã‡§ó ‡§ï‡•á ‡§π‡§ø‡§∏‡§æ‡§¨ ‡§∏‡•á ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§∏‡§ü‡•Ä‡§ï ‡§¶‡§µ‡§æ‡§à‡•§</li>
                            <li>‚úÖ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§∏‡•á ‡§â‡§ö‡§ø‡§§ ‡§¶‡§æ‡§Æ‡•§</li>
                            <li>‚úÖ ‡§ó‡•ã‡§™‡§æ‡§≤ ‡§ú‡•Ä ‡§≠‡§æ‡§à‡§∏‡§æ‡§¨ (‡§ï‡•É‡§∑‡§ø ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û) ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§Æ‡•Å‡§´‡•ç‡§§ ‡§∏‡§≤‡§æ‡§π‡•§</li>
                        </ul>
                    </div>
                </details>
                <details>
                    <summary>‡§¶‡•Å‡§ï‡§æ‡§® ‡§ï‡§æ ‡§™‡§§‡§æ (Address) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?</summary>
                    <div class="faq-answer" style="font-weight: bold; color: var(--primary-green);">
                        üìç ‡§™‡§§‡§æ:<br>Main Road Badayala Mataji,<br>Tahasil Piploda, Jila Ratlam,<br>State Madhya Pradesh.
                    </div>
                </details>
            </div>

            <div class="ceo-section">
                <img src="https://firebasestorage.googleapis.com/v0/b/go-play-b8c0c.appspot.com/o/Storege%2FIMG_20260116_101546.jpg?alt=media&token=7f9729dc-c92c-4233-b51f-74a53449cf63" alt="Gopal Dhangar" class="ceo-img">
                <div class="ceo-name">‡§ó‡•ã‡§™‡§æ‡§≤ ‡§ß‡§®‡§ó‡§∞ (Gopal Dhangar)</div>
                <div class="ceo-badge">üë®‚Äçüåæ ‡§ï‡•É‡§∑‡§ø ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û (Agriculture Expert)</div>
                <p class="ceo-bio">"‡§´‡§∏‡§≤‡•ã‡§Ç ‡§ï‡•Ä ‡§π‡§∞ ‡§¨‡•Ä‡§Æ‡§æ‡§∞‡•Ä ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§á‡§≤‡§æ‡§ú ‡§î‡§∞ ‡§∏‡§π‡•Ä ‡§∏‡§≤‡§æ‡§π‡•§ ‡§π‡§Æ‡§æ‡§∞‡§æ ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§î‡§∞ ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡•á‡§π‡§®‡§§, ‡§≤‡§æ‡§è‡§ó‡•Ä ‡§´‡§∏‡§≤ ‡§Æ‡•á‡§Ç ‡§¨‡§∞‡§ï‡§§‡•§"</p>
            </div>
        </div>

        <div id="capture-screen" class="screen">
            <div id="camera-container">
                <video id="video-feed" autoplay playsinline muted></video>
                <img id="captured-image" alt="Captured Crop">
            </div>
            <div class="controls">
                <div id="initial-controls" class="btn-group">
                    <button class="btn-primary" onclick="capturePhoto()">üì∑ ‡§´‡•ã‡§ü‡•ã ‡§ñ‡•Ä‡§Ç‡§ö‡•á‡§Ç</button>
                    <button class="btn-secondary" onclick="triggerFileUpload()">üñºÔ∏è ‡§ó‡•à‡§≤‡§∞‡•Ä ‡§∏‡•á ‡§ö‡•Å‡§®‡•á‡§Ç</button>
                </div>
                <div id="review-controls" class="btn-group" style="display:none;">
                    <button class="btn-secondary" onclick="retakePhoto()">üîÑ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§≤‡•á‡§Ç</button>
                    <button class="btn-action" onclick="goToAnalysis()">‚úÖ ‡§Ü‡§ó‡•á ‡§¨‡•ù‡•á‡§Ç (Next)</button>
                </div>
            </div>
            <input type="file" id="file-input" accept="image/*" onchange="handleFileUpload(event)">
            <canvas id="canvas" style="display:none;"></canvas>
            <button class="btn-secondary" onclick="location.reload()" style="margin-top:10px;">üè† ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Ç</button>
        </div>

        <div id="loading-screen" class="screen">
            <div class="spinner"></div>
            <h3>‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...</h3>
            <p>‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç</p>
            <div class="ai-notice">‚ú® Image Analysis Powered by Agent</div>
        </div>

        <div id="result-screen" class="screen">
            <div id="error-message" class="message-box"></div>
            <div id="diagnosis-section" class="result-card" style="display:none;">
                <h2 class="result-title">üîç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£ (Problem Details)</h2>
                <div id="diagnosis-content" class="diagnosis-content"></div>
            </div>
            <div id="solution-section" class="marketing-box" style="display:none;">
                <h2 class="result-title" style="border-color: #d84315; color: #d84315;">üíä ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® (Solution)</h2>
                <div class="marketing-text">
                    <p>‡§∞‡•ã‡§ó ‡§ï‡•Ä ‡§Ö‡§∏‡§≤‡•Ä ‡§¶‡§µ‡§æ ‡§≤‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§∂‡•â‡§™ ‡§™‡§∞ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§</p>
                    <p>‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§®‡§ï‡§≤‡•Ä ‡§¶‡§µ‡§æ‡§ì‡§Ç ‡§∏‡•á ‡§¨‡§ö‡•á‡§Ç‡•§ ‡§π‡§Æ 100% ‡§ú‡•á‡§®‡•ç‡§Ø‡•Å‡§á‡§® ‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§</p>
                    <p><strong>üìç ‡§™‡§§‡§æ: Main Road Badayala Mataji, Ratlam (MP)</strong></p>
                </div>
                <button onclick="openModal()" class="shop-btn">‡§¶‡§µ‡§æ‡§à ‡§≤‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Å ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç</button>
            </div>
            <button class="btn-secondary" style="margin-top: 20px;" onclick="location.reload()">üè† ‡§π‡•ã‡§Æ ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Å</button>
        </div>
    </main>

    <div id="contact-modal" class="modal-overlay">
        <div class="modal-box">
            <div class="modal-title">üìû ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç</div>
            <div class="input-group">
                <label>‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ (Name)</label>
                <input type="text" id="user-name" class="input-field" placeholder="‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç...">
            </div>
            <div class="input-group">
                <label>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ (Mobile)</label>
                <input type="tel" id="user-mobile" class="input-field" placeholder="10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§®‡§Ç‡§¨‡§∞...">
            </div>
            <button class="btn-primary btn-go" onclick="submitForm()">üöÄ GO</button>
            <div class="close-modal" onclick="closeModal()">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç (Cancel)</div>
        </div>
    </div>

    <script>
        // ==========================================
        // ‚ö†Ô∏è SETUP CONFIGURATION
        // ==========================================
        // 1. ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡•Ä Gemini API Key ‡§°‡§æ‡§≤‡•á‡§Ç
        const GEMINI_API_KEY = 'AIzaSyDIEV0sHlWIP1dld5z-AjUj8dcTylylZmI'; 
        
        // 2. ‡§Ü‡§™‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§¶‡§ø‡§è ‡§ó‡§è Telegram ‡§ï‡•ç‡§∞‡•á‡§°‡•á‡§Ç‡§∂‡§ø‡§Ø‡§≤‡•ç‡§∏
        const TELEGRAM_BOT_TOKEN = '8140645281:AAHDAEf80ks5rm16KOPyNcxbNqYR6gP-DIY'; 
        const TELEGRAM_CHAT_ID = '5961130033'; 
        
        // ==========================================
        // APP LOGIC
        // ==========================================
        const video = document.getElementById('video-feed');
        const capturedImage = document.getElementById('captured-image');
        const canvas = document.getElementById('canvas');
        const fileInput = document.getElementById('file-input');
        
        let stream = null;
        let finalImageBase64 = null;
        let latestDiagnosisText = ""; // AI ‡§ï‡§æ ‡§ú‡§µ‡§æ‡§¨ ‡§∏‡•á‡§µ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è

        function startApp() {
            document.getElementById('landing-screen').classList.remove('active');
            document.getElementById('capture-screen').classList.add('active');
            initCamera(); 
        }

        async function initCamera() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
                video.srcObject = stream;
            } catch (err) {
                alert("‡§ï‡•à‡§Æ‡§∞‡§æ ‡§ö‡§æ‡§≤‡•Ç ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§∏‡§ï‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§Ç ‡§Ø‡§æ ‡§ó‡•à‡§≤‡§∞‡•Ä ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§");
            }
        }

        function capturePhoto() {
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            canvas.getContext('2d').drawImage(video, 0, 0);
            showPreview(canvas.toDataURL('image/jpeg', 0.8));
        }

        function triggerFileUpload() { fileInput.click(); }
        
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = e => showPreview(e.target.result);
                reader.readAsDataURL(file);
            }
        }

        function showPreview(dataUrl) {
            finalImageBase64 = dataUrl;
            video.style.display = 'none';
            capturedImage.src = dataUrl;
            capturedImage.style.display = 'block';
            document.getElementById('initial-controls').style.display = 'none';
            document.getElementById('review-controls').style.display = 'flex';
        }

        function retakePhoto() {
            finalImageBase64 = null;
            capturedImage.style.display = 'none';
            video.style.display = 'block';
            document.getElementById('review-controls').style.display = 'none';
            document.getElementById('initial-controls').style.display = 'flex';
        }

        function goToAnalysis() {
            document.getElementById('capture-screen').classList.remove('active');
            document.getElementById('loading-screen').classList.add('active');
            if (stream) stream.getTracks().forEach(track => track.stop());
            performAIAnalysis();
        }

        // ==========================================
        // AI LOGIC
        // ==========================================
        async function performAIAnalysis() {
            if (!finalImageBase64) return alert("‡§´‡•ã‡§ü‡•ã ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä");

            const modelName = 'gemini-robotics-er-1.5-preview';
            const url = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${GEMINI_API_KEY}`;
            
            const promptText = `You are an agricultural expert. Verify if image is crop/plant. If not return "NOT_CROP_ERROR". If yes, diagnose disease in PURE HINDI bullets. No medicine names.`;

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [
                                { text: promptText },
                                { inline_data: { mime_type: "image/jpeg", data: finalImageBase64.split(',')[1] } }
                            ]
                        }]
                    })
                });

                if (!response.ok) throw new Error("API Error");
                const data = await response.json();
                const text = data.candidates[0].content.parts[0].text;
                
                handleAIResult(text);
            } catch (error) {
                showResultScreen(false, "‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§è‡§∞‡§∞: " + error.message);
            }
        }

        function handleAIResult(text) {
            if (text.includes("NOT_CROP_ERROR")) {
                showResultScreen(false, "‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§ø‡§∞‡•ç‡§´ ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§´‡•ã‡§ü‡•ã ‡§≤‡•á‡§Ç‡•§");
            } else {
                // ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç ‡§§‡§æ‡§ï‡§ø WhatsApp/Telegram ‡§™‡§∞ ‡§≠‡•á‡§ú‡§æ ‡§ú‡§æ ‡§∏‡§ï‡•á
                // (‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§∏‡§ø‡§§‡§æ‡§∞‡•á * ‡§π‡§ü‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç ‡§§‡§æ‡§ï‡§ø ‡§Æ‡•à‡§∏‡•á‡§ú ‡§∏‡§æ‡•û ‡§¶‡§ø‡§ñ‡•á)
                latestDiagnosisText = text.replace(/\*/g, '').trim();

                let html = text.replace(/\*/g, '‚Ä¢').split('\n').map(l => l.trim().length > 0 ? `<p>${l}</p>` : '').join('');
                showResultScreen(true, html);
            }
        }

        function showResultScreen(success, content) {
            document.getElementById('loading-screen').classList.remove('active');
            document.getElementById('result-screen').classList.add('active');
            if (success) {
                document.getElementById('diagnosis-content').innerHTML = content;
                document.getElementById('diagnosis-section').style.display = 'block';
                document.getElementById('solution-section').style.display = 'block';
                document.getElementById('error-message').style.display = 'none';
            } else {
                document.getElementById('error-message').innerText = content;
                document.getElementById('error-message').style.display = 'block';
            }
        }

        // ==========================================
        // MODAL & SUBMIT LOGIC
        // ==========================================
        function openModal() {
            document.getElementById('contact-modal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('contact-modal').style.display = 'none';
        }

        async function submitForm() {
            const name = document.getElementById('user-name').value.trim();
            const mobile = document.getElementById('user-mobile').value.trim();

            if (!name || !mobile) {
                alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§î‡§∞ ‡§®‡§Ç‡§¨‡§∞ ‡§≠‡§∞‡•á‡§Ç‡•§");
                return;
            }

            // Button Loading State
            const btn = document.querySelector('.btn-go');
            btn.innerText = "Processing...";
            btn.disabled = true;

            // 1. Send to Telegram (With AI Diagnosis)
            if (TELEGRAM_BOT_TOKEN && TELEGRAM_CHAT_ID && finalImageBase64) {
                try {
                    await sendToTelegram(name, mobile, latestDiagnosisText, finalImageBase64);
                } catch (e) {
                    console.error("Telegram send failed", e);
                }
            }

            // 2. Open WhatsApp (With AI Diagnosis)
            const waNumber = "916264699580";
            // ‡§Æ‡•à‡§∏‡•á‡§ú ‡§Æ‡•á‡§Ç "üö´ Problem :" ‡§ú‡•ã‡•ú‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à
            const message = `‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ‡§Æ‡•á‡§∞‡§æ ‡§®‡§æ‡§Æ ${name} ‡§π‡•à (Mobile: ${mobile})‡•§\n\nüö´ Problem : ${latestDiagnosisText}\n\n‡§Æ‡•à‡§Ç‡§®‡•á ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§´‡•ã‡§ü‡•ã ‡§≠‡•á‡§ú‡•Ä ‡§π‡•à, ‡§Æ‡•Å‡§ù‡•á ‡§¶‡§µ‡§æ‡§à ‡§ö‡§æ‡§π‡§ø‡§è‡•§`;
            
            const waURL = `https://wa.me/${waNumber}?text=${encodeURIComponent(message)}`;
            
            // Redirect
            window.location.href = waURL;
        }

        // Telegram Sender
        async function sendToTelegram(name, mobile, diagnosis, base64) {
            const blob = await (await fetch(base64)).blob();
            const formData = new FormData();
            formData.append("chat_id", TELEGRAM_CHAT_ID);
            formData.append("photo", blob, "crop.jpg");
            
            // Telegram Caption ‡§Æ‡•á‡§Ç ‡§≠‡•Ä AI Problem ‡§ú‡•ã‡§°‡§º ‡§¶‡§ø‡§Ø‡§æ ‡§π‡•à
            const captionText = `üå± New Crop Query\nüë§ Name: ${name}\nüì± Mobile: ${mobile}\n\nüö´ Problem : ${diagnosis}`;
            
            formData.append("caption", captionText);

            await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendPhoto`, {
                method: 'POST',
                body: formData
            });
        }
    </script>
</body>
</html>